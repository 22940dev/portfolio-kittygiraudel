<script>
document.addEventListener('DOMContentLoaded', function () {
  loadJS('{{ "/assets/js/main.min.js" | prepend: site.baseurl }}', init);
});

function init() {
  var app = new App({
    createToC: {% if page.summary %}true{% else %}false{% endif %},
    loadComments: {% unless page.comments == false or page.external %}true{% else %}false{% endunless %},
    disqusOptions: {
      title: "{{ page.title }}",
      url: {% if page.disqus %}'{{ page.disqus }}'{% else %}window.location.href{% endif %},
      name: 'hugogiraudel'
    }
  });
}
</script>

<script>
// Install service worker
if ('serviceWorker' in navigator) {
  navigator.serviceWorker
    .register('/service-worker.js', { scope: '/' })
    .then(function (registration) {
      console.log(
        '%cserviceworker:registration', 'color:green',
        'successful with scope: ' + registration.scope
      )
    })
    .catch(function (error) {
      console.error(
        '%cserviceworker:registration', 'color:red',
        'failed: ', error
      )
    })
}
</script>
